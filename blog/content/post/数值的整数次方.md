---
title: 数值的整数次方
date: 2023-01-08T18:06:57+08:00
draft: false
categories: ["算法"]
tags: ["算法"]
---

# 数值的整数次方
#算法/二叉树
#算法/剑指offer
#算法/仍然不会

若使用普通的`n—;res*=x`，那么会导致超出时间限制，因此需要简化这一循环过程
一个数x的n次幂，可以表示为x^(n/2)与x^(n/2)的乘积。这个和二叉树的左右子树是类似的，只需递归这两个结果即可。需要注意的是，若n为奇数，那么还需在左右子树的结果上乘以x。不必担心多乘了，例如
2^3 = 2^1 * 2^1 * 2
2^5 = 2^2 * 2^2 * 2，可以看出是合理的
因为x mod 2还剩1的话，还需要再乘1个x

做题时，一定要画一个树状图来分析
```
     6
  3      3
1   1   1  1
```

位运算小技巧：
1. x >> 1，即右移一位，相当于除以2
一般地：x >> n，右移n位，相当于除以2^n
x << n，左移n位，相当于乘以2^n

2. x & 1 == 1，为奇数；x & 1 == 0，为偶数
x & 1相当于用x的最右边1位与1进行且运算，最右边1位为1则为奇数，可以通过举例，例如1为奇数，那么 1 & 1 == 1，所以为奇数，反之1 & 1 == 0为偶数

```go
func myPow(x float64, n int) float64 {
    if n < 0 {
        n = -n
        x = 1/x
    }
    return pow(x, n)
}

func pow(x float64, n int) float64 {
    if n == 0 {
        return 1.0 
    }
    res := pow(x, n>>1)
    if n & 1 == 1 {
        res *= res * x
    } else {
        res *= res
    }
    return res
}
```