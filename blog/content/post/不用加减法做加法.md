---
title: 不用加减法做加法
date: 2023-01-08T18:06:57+08:00
draft: false
categories: ["算法"]
tags: ["算法"]
---

# 不用加减法做加法
#算法/位运算
#算法/仍然不会

## 链接
[力扣](https://leetcode-cn.com/problems/bu-yong-jia-jian-cheng-chu-zuo-jia-fa-lcof/)

## 题目
```
写一个函数，求两个整数之和，要求在函数体内不得使用 “+”、“-”、“*”、“/” 四则运算符号。

 

示例:

输入: a = 1, b = 1
输出: 2
 

提示：

a, b 均可能是负数或 0
结果不会溢出 32 位整数
```

## 思路

1. 异或也叫半加运算，其运算法则相当于不带进位的二进制加法：
0⊕0=0，1⊕0=1，0⊕1=1，1⊕1=0（同为0，异为1）

2. 与 运算可用来求进位数。

举例：
例如9+1=10

- 用与运算进位数
```
1 0 0 1
      1
--------
0 0 0 1 
```
将其左移1位为 0010

- 用异或运算求不带进位的加法
```
1 0 0 1
      1
----------
1 0 0 0
```

- 不进位的结果 异或 进位的结果即为最终答案
```
1 0 0 0
0 0 1 0
---------
1 0 1 0
```

1010 = 10

因此公式如下：
(a^b) ^ (a&b) << 1

tips:
 正数和0的补码就是该数字本身再补上最高比特0。 负数的补码则是将其对应正数按位取反再加1
在计算机系统中，数值一律用 **补码** 来表示和存储。**补码的优势：** 加法、减法可以统一处理（CPU只有加法器）。因此，以上方法 **同时适用于正数和负数的加法** 。

## 答案
进位为0时退出即可
```go
func add(a int, b int) int {
    for b != 0 {
        n := (a & b) << 1
        a ^= b
        b = n
    }
    return a
}
```